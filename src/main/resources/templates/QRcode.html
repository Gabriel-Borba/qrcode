<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Testes</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script>


		function change_qr_code() {
			fire_ajax_submit();

		}



		function fire_ajax_submit() {
			$.ajax({
				type: "POST",
				contentType: "application/json",
				url: "/createNewQrCode",
				cache: false,
				timeout: 600000,
				success: function (data) {
					$("#qrCode").attr("src", "data:image/jpeg;base64, "+ data);
					console.log("SUCCESS : ", data);
				},
				error: function (e) {
					console.log("ERROR : ", e);

				}
			});

		}
	</script>

</head>


<body>
	<div class="container" align="center">
		<div class="card" style="width: 400px" align="center">
			<img class="card-img-top" id="qrCode" th:src="|data:image/png;base64,${code}|" alt="QR Code"
				style="width: 100%" />
			<div class="card-body" align="center">
				<a th:href="@{'/readQR?qrImage=' + ${code}}" class="btnbtn-primary">Read
					QRCode</a>
			</div>
			<div class="card-body" align="center">
				<button id="change"  onclick="change_qr_code()" class="btn btn-primary">Read
					Atualiza QrCode
				</button>
			</div>
		</div>
		<p th:text="${content}" style="color: green;"></p>
	</div>
</body>
</html>